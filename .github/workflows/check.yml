name: check

on:
  push:
    paths:
    - "**.nix"
    - "**.lock"

env:
  NIX_CONFIG: "accept-flake-config = true"

jobs:
  check:
    runs-on: "ubuntu-latest"

    steps:
    - uses: "actions/checkout@692973e3d937129bcbf40652eb9f2f61becf3332" # v4.1.7

    - uses: "DeterminateSystems/flake-checker-action@ae43dea95bc73541287cfd10e2dee994d1877291" # v8
    - uses: "DeterminateSystems/nix-installer-action@ab6bcb2d5af0e904d04aea750e2089e9dc4cbfdd" # v13
    - uses: "DeterminateSystems/magic-nix-cache-action@87b14cf437d03d37989d87f0fa5ce4f5dc1a330b" # v8

    - run: nix flake check --show-trace
