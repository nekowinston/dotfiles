#!/usr/bin/env bash

UNREAD_ONLY=true
MAIL_DIR=~/.local/share/mail

mailcount=0

if [[ -d ${MAIL_DIR} ]]; then
  for dir in "${MAIL_DIR}"/*/; do
    # get file count for the unread mailbox, add to count
    mailcount=$(( $( ls ${dir}INBOX/new | wc -l ) + $mailcount ))

    # also add the rest of the inbox if var is set
    if ! ($UNREAD_ONLY); then
      mailcount=$(( $( ls ${dir}INBOX/cur | wc -l ) + $mailcount ))
    fi

  done
fi

echo ${mailcount}
